-# Requires 'controls' and 'prefix'

%ul.slugtree
  =walk_slug_tree(Program.slugtree(controls)) do |item, step|
    .row-fluid
      -content_id = "content_#{rand(36**8).to_s(36)}" # unique ID for toggle
      .span12
        .slot.controlslot.span12{ :'data-toggle' => 'collapse', :'data-target' => "##{content_id}" }
          %a.widgetbtn.fltrt{ :href => flow_control_path(item), :title => 'View Control' }
            %i.gcmsicon-arrowright-grey
          %a.widgetbtn.fltrt{ :href => edit_flow_control_path(item), :'data-toggle' => 'modal-ajax-form', :'data-modal-reset' => 'reset', :title => 'Edit Control' }
            %i.gcmsicon-edit-grey
          .expander
          %span.prefix
            =prefix
            =item.slug
          =item.title || item.description
      .row-fluid-slotcontent.collapse{ :id => content_id }
        %p=item.description
